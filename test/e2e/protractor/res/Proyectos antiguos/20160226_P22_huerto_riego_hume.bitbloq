{"code":"\n/***   Included libraries  ***/\n#include <Servo.h>\n#include <SoftwareSerial.h>\n#include <BitbloqSoftwareSerial.h>\n#include <Wire.h>\n#include <BitbloqHTS221.h>\n#include <HTS221_Registers.h>\n\n\n/***   Global variables and function definition  ***/\nHTS221 sensor_humedad_temperatura_0;Servo servo_0;bqSoftwareSerial puerto_serie_0(0,1,9600);float grados = 0;bool riego_abierto = true;void abrir_riego (){for(grados=45;grados<=110;grados+=5){servo_0.write(grados);delay(100);}riego_abierto = true;}void cerrar_riego (){for(grados=110;grados>=45;grados-=5){servo_0.write(grados);delay(100);}riego_abierto = false;}\n\n/***   Setup  ***/\nvoid setup(){Wire.begin();sensor_humedad_temperatura_0.begin();servo_0.attach(8);servo_0.write(110);}\n\n/***   Loop  ***/\nvoid loop(){if(sensor_humedad_temperatura_0.getHumidity() < 35 && !riego_abierto){abrir_riego();}else if (sensor_humedad_temperatura_0.getHumidity() >= 35 && riego_abierto){cerrar_riego();}}","description":"","videoUrl":"","name":"2016-02-26_P22_huerto_riego_humedad","corbelId":"55acae7ae4b00f538d041f75:c0f40849-d7fc-463b-b45c-847f9b6a77aa","image":"default","userTags":[],"hardwareTags":["servo","hts221","sp","bq ZUM"],"software":{"loop":{"content":[[]],"childs":[{"content":[[{"bloqInputId":"CONDITION","value":{"content":[[{"bloqInputId":"ARG1","value":{"content":[[{"bloqInputId":"ARG1","value":{"content":[[{"value":"sensor_humedad_temperatura_0","id":"SENSOR","alias":"dynamicDropdown"}]],"name":"hts221Humidity","enable":true},"alias":"bloqInput"},{"value":"<","id":"OPERATOR","alias":"staticDropdown"},{"bloqInputId":"ARG2","value":{"content":[[{"value":"35","id":"VALUE","alias":"numberInput"}]],"name":"number","enable":true},"alias":"bloqInput"}]],"name":"equalityOperations","enable":true},"alias":"bloqInput"},{"value":"&&","id":"OPERATOR","alias":"staticDropdown"},{"bloqInputId":"ARG2","value":{"content":[[{"bloqInputId":"CONDITION","value":{"content":[[{"value":"riego_abierto","id":"VAR","alias":"dynamicDropdown"}]],"name":"selectVariable","enable":true},"alias":"bloqInput"}]],"name":"not","enable":true},"alias":"bloqInput"}]],"name":"logicOperations","enable":true},"alias":"bloqInput"}]],"childs":[{"content":[[{"value":"abrir_riego","id":"FUNCTION","alias":"dynamicDropdown"}]],"name":"invokeFunction","enable":true}],"name":"ifAdvanced","enable":true},{"content":[[{"bloqInputId":"VAR","value":{"content":[[{"bloqInputId":"ARG1","value":{"content":[[{"bloqInputId":"ARG1","value":{"content":[[{"value":"sensor_humedad_temperatura_0","id":"SENSOR","alias":"dynamicDropdown"}]],"name":"hts221Humidity","enable":true},"alias":"bloqInput"},{"value":">=","id":"OPERATOR","alias":"staticDropdown"},{"bloqInputId":"ARG2","value":{"content":[[{"value":"35","id":"VALUE","alias":"numberInput"}]],"name":"number","enable":true},"alias":"bloqInput"}]],"name":"equalityOperations","enable":true},"alias":"bloqInput"},{"value":"&&","id":"OPERATOR","alias":"staticDropdown"},{"bloqInputId":"ARG2","value":{"content":[[{"value":"riego_abierto","id":"VAR","alias":"dynamicDropdown"}]],"name":"selectVariable","enable":true},"alias":"bloqInput"}]],"name":"logicOperations","enable":true},"alias":"bloqInput"}]],"childs":[{"content":[[{"value":"cerrar_riego","id":"FUNCTION","alias":"dynamicDropdown"}]],"name":"invokeFunction","enable":true}],"name":"elseifAdvanced","enable":true}],"name":"loopBloq","enable":true},"setup":{"content":[[]],"childs":[{"content":[[{"value":"servo_0","id":"SERVO","alias":"dynamicDropdown"},{"value":"110","id":"POSITION","alias":"numberInput"}]],"name":"servoNormal","enable":true}],"name":"setupBloq","enable":true},"vars":{"content":[[]],"childs":[{"content":[[{"value":"grados","id":"NAME","alias":"varInput"},{"bloqInputId":"VALUE","value":{"content":[[{"value":"0","id":"VALUE","alias":"numberInput"}]],"name":"number","enable":true},"alias":"bloqInput"}]],"name":"declareVariable","enable":true},{"content":[[{"value":"riego_abierto","id":"NAME","alias":"varInput"},{"bloqInputId":"VALUE","value":{"content":[[{"value":"true","id":"STATE","alias":"staticDropdown"}]],"name":"boolean","enable":true},"alias":"bloqInput"}]],"name":"declareVariable","enable":true},{"content":[[{"value":"abrir_riego","id":"FUNCNAME","alias":"varInput"}]],"childs":[{"content":[[{"value":"grados","id":"VAR","alias":"dynamicDropdown"},{"value":"45","id":"INIT","alias":"numberInput"},{"value":"110","id":"FINAL","alias":"numberInput"},{"value":"+","id":"MODE","alias":"staticDropdown"},{"value":"5","id":"ADD","alias":"numberInput"}]],"childs":[{"content":[[{"bloqInputId":"SERVO","value":{"content":[[{"value":"servo_0","id":"COMPONENT","alias":"dynamicDropdown"}]],"name":"hwVariable","enable":true},"alias":"bloqInput"},{"bloqInputId":"POSITION","value":{"content":[[{"value":"grados","id":"VAR","alias":"dynamicDropdown"}]],"name":"selectVariable","enable":true},"alias":"bloqInput"}]],"name":"servoNormalAdvanced","enable":true},{"content":[[{"value":"100","id":"TIME","alias":"numberInput"}]],"name":"wait","enable":true}],"name":"for-v1","enable":true},{"content":[[{"value":"riego_abierto","id":"NAME","alias":"dynamicDropdown"},{"bloqInputId":"VALUE","value":{"content":[[{"value":"true","id":"STATE","alias":"staticDropdown"}]],"name":"boolean","enable":true},"alias":"bloqInput"}]],"name":"setVariable","enable":true}],"name":"voidFunction","enable":true},{"content":[[{"value":"cerrar_riego","id":"FUNCNAME","alias":"varInput"}]],"childs":[{"content":[[{"value":"grados","id":"VAR","alias":"dynamicDropdown"},{"value":"110","id":"INIT","alias":"numberInput"},{"value":"45","id":"FINAL","alias":"numberInput"},{"value":"-","id":"MODE","alias":"staticDropdown"},{"value":"5","id":"ADD","alias":"numberInput"}]],"childs":[{"content":[[{"bloqInputId":"SERVO","value":{"content":[[{"value":"servo_0","id":"COMPONENT","alias":"dynamicDropdown"}]],"name":"hwVariable","enable":true},"alias":"bloqInput"},{"bloqInputId":"POSITION","value":{"content":[[{"value":"grados","id":"VAR","alias":"dynamicDropdown"}]],"name":"selectVariable","enable":true},"alias":"bloqInput"}]],"name":"servoNormalAdvanced","enable":true},{"content":[[{"value":"100","id":"TIME","alias":"numberInput"}]],"name":"wait","enable":true}],"name":"for-v1","enable":true},{"content":[[{"value":"riego_abierto","id":"NAME","alias":"dynamicDropdown"},{"bloqInputId":"VALUE","value":{"content":[[{"value":"false","id":"STATE","alias":"staticDropdown"}]],"name":"boolean","enable":true},"alias":"bloqInput"}]],"name":"setVariable","enable":true}],"name":"voidFunction","enable":true}],"name":"varsBloq","enable":true}},"hardware":{"board":"bq ZUM","connections":[{"pinSourceUid":"07a1f88d-a11e-4cc6-9014-d3f22d29e8d5","pinTargetUid":"6be0dd9d-2e52-4b7d-9dfc-c9edad53bd05"},{"pinSourceUid":"71c0275c-1451-47e0-bfbe-2d5af16ed03c","pinTargetUid":"6be0dd9d-2e52-4b7d-9dfc-c9edad53ba01"},{"pinSourceUid":"3b3306d0-7c43-49ff-9d2b-eff06a791fab","pinTargetUid":"6be0dd9d-2e52-4b7d-9dfc-c9edad53ba00"},{"pinSourceUid":"34f0aedd-f1f3-4293-aa5b-330ce15f0ac9","pinTargetUid":"6be0dd9d-2e52-4b7d-9dfc-c9edad53bc05"}],"components":[{"height":106,"category":"servos","id":"servo","name":"servo_0","width":125,"pin":{"s":"8"},"uid":"aeb65741-9a03-4514-af5c-b919bbadfc4f","connected":true,"dragtype":"components","pins":{"digital":["s"]},"coordinates":{"y":18.19116135662898,"x":45.331894225580136},"oscillator":"false","endpoints":{"s":{"type":"digital","uid":"07a1f88d-a11e-4cc6-9014-d3f22d29e8d5"}}},{"height":113,"category":"hts221","id":"hts221","name":"sensor_humedad_temperatura_0","width":107,"pin":{"scl":"A5","sda":"A4"},"uid":"2f757ebf-8cee-4ae9-8c8c-183b90bea0ea","connected":true,"type":"digital","dragtype":"components","pins":{"analog":["sda","scl"]},"coordinates":{"y":67.1120246659815,"x":53.42687533729088},"endpoints":{"scl":{"type":"analog","uid":"3b3306d0-7c43-49ff-9d2b-eff06a791fab"},"sda":{"type":"analog","uid":"71c0275c-1451-47e0-bfbe-2d5af16ed03c"}}},{"height":71,"category":"serialElements","id":"sp","name":"puerto_serie_0","width":115,"pin":{"s":"serial"},"uid":"183d85f0-121b-41db-bdae-38a73e80a894","connected":true,"baudRate":"9600","dragtype":"components","pins":{"serial":["s"]},"coordinates":{"y":47.68756423432682,"x":28.27846735024285},"endpoints":{"s":{"type":"serial","uid":"34f0aedd-f1f3-4293-aa5b-330ce15f0ac9"}}}]},"defaultTheme":"infotab_option_colorTheme","timesDownload":0,"timesAdded":0,"timesViewed":0}