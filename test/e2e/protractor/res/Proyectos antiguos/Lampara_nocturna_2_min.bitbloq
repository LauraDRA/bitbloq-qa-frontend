{"code":"\n/***   Included libraries  ***/\n\n\n/***   Global variables and function definition  ***/\nint led_2 = 4;int led_1 = 3;int boton_0 = 7;int sensor_de_luz_0 = A1;float veces_encendida_luz = 0;String funcionando = \"si\";\n\n/***   Setup  ***/\nvoid setup(){pinMode(led_2, OUTPUT);pinMode(led_1, OUTPUT);pinMode(boton_0, INPUT);pinMode(sensor_de_luz_0, INPUT);digitalWrite(led_1,LOW);digitalWrite(led_2,LOW);}\n\n/***   Loop  ***/\nvoid loop(){while (digitalRead(7) == 0){digitalWrite(led_1,LOW);}digitalWrite(led_1,HIGH);veces_encendida_luz = 0;funcionando = \"si\";delay(1000);while (funcionando == \"si\"){while (analogRead(A1) < 200){if(veces_encendida_luz == 0){digitalWrite(led_2,HIGH);delay(2000);digitalWrite(led_2,LOW);veces_encendida_luz = 1;}if(digitalRead(7) == 1){digitalWrite(led_1,LOW);delay(1000);funcionando = \"no\";break;}}veces_encendida_luz = 0;if(digitalRead(7) == 1){digitalWrite(led_1,LOW);delay(1000);funcionando = \"no\";}}}","description":"Acabo de ver que en el archivo que envié esta tarde el led se encendía apenas 5 segundos (para mis pruebas). Ya lo he cambiado para que sean los dos minutos del enunciado.\nPerdón y gracias.\n\nInicialmente el programa está esperando que lo pongas en funcionamiento pulsando el botón (de noche o de día). Igualmente, si durante el día o la noche lo vuelves a pulsar, todo se detiene, apaga y resetea esperando a volver a ser activado de nuevo.\nExiste una variable llamada \"veces_encendida_luz\" que sirve para controlar si la luz (nocturna) se ha encendido o no, porque solo debe encenderse durante 2 minutos la primera vez que se hace de noche.\nTambién existe otra variable llamada \"funcionando\" (o \"si\" o \"no\") para que el programa se ejecute solo si pulsamos el botón (para ponerlo en funcionamiento)\nEl programa se ha dividido en dos bloques, uno con las instrucciones para cuando es de día y otro para cuando es de noche.","name":"Lampara_nocturna_2_min","corbelId":"55acae7ae4b00f538d041f75:c1851dfb-0a6c-449a-9985-bb85862bde6d","image":"default","userTags":[],"hardwareTags":["bq ZUM","led","button","ldrs"],"software":{"loop":{"content":[[]],"childs":[{"content":[[{"bloqInputId":"ARG1","value":{"content":[[{"value":"boton_0","id":"SENSOR","alias":"dynamicDropdown"}]],"name":"readSensor","enable":true},"alias":"bloqInput"},{"value":"==","id":"OPERATOR","alias":"staticDropdown"},{"bloqInputId":"ARG2","value":{"content":[[{"value":"0","id":"VALUE","alias":"numberInput"}]],"name":"number","enable":true},"alias":"bloqInput"}]],"childs":[{"content":[[{"value":"LOW","id":"STATE","alias":"staticDropdown"},{"value":"led_1","id":"LED","alias":"dynamicDropdown"}]],"name":"led","enable":true}],"name":"while","enable":true},{"content":[[{"value":"HIGH","id":"STATE","alias":"staticDropdown"},{"value":"led_1","id":"LED","alias":"dynamicDropdown"}]],"name":"led","enable":true},{"content":[[{"value":"veces_encendida_luz","id":"NAME","alias":"dynamicDropdown"},{"bloqInputId":"VALUE","value":{"content":[[{"value":"0","id":"VALUE","alias":"numberInput"}]],"name":"number","enable":true},"alias":"bloqInput"}]],"name":"setVariable","enable":true},{"content":[[{"value":"funcionando","id":"NAME","alias":"dynamicDropdown"},{"bloqInputId":"VALUE","value":{"content":[[{"value":"si","id":"TEXT","alias":"stringInput"}]],"name":"string","enable":true},"alias":"bloqInput"}]],"name":"setVariable","enable":true},{"content":[[{"value":"1000","id":"TIME","alias":"numberInput"}]],"name":"wait","enable":true},{"content":[[{"bloqInputId":"ARG1","value":{"content":[[{"value":"funcionando","id":"VAR","alias":"dynamicDropdown"}]],"name":"selectVariable","enable":true},"alias":"bloqInput"},{"value":"==","id":"OPERATOR","alias":"staticDropdown"},{"bloqInputId":"ARG2","value":{"content":[[{"value":"si","id":"TEXT","alias":"stringInput"}]],"name":"string","enable":true},"alias":"bloqInput"}]],"childs":[{"content":[[{"bloqInputId":"ARG1","value":{"content":[[{"value":"sensor_de_luz_0","id":"SENSOR","alias":"dynamicDropdown"}]],"name":"readSensor","enable":true},"alias":"bloqInput"},{"value":"<","id":"OPERATOR","alias":"staticDropdown"},{"bloqInputId":"ARG2","value":{"content":[[{"value":"200","id":"VALUE","alias":"numberInput"}]],"name":"number","enable":true},"alias":"bloqInput"}]],"childs":[{"content":[[{"bloqInputId":"ARG1","value":{"content":[[{"value":"veces_encendida_luz","id":"VAR","alias":"dynamicDropdown"}]],"name":"selectVariable","enable":true},"alias":"bloqInput"},{"value":"==","id":"OPERATOR","alias":"staticDropdown"},{"bloqInputId":"ARG2","value":{"content":[[{"value":"0","id":"VALUE","alias":"numberInput"}]],"name":"number","enable":true},"alias":"bloqInput"}]],"childs":[{"content":[[{"value":"HIGH","id":"STATE","alias":"staticDropdown"},{"value":"led_2","id":"LED","alias":"dynamicDropdown"}]],"name":"led","enable":true},{"content":[[{"value":"2000","id":"TIME","alias":"numberInput"}]],"name":"wait","enable":true},{"content":[[{"value":"LOW","id":"STATE","alias":"staticDropdown"},{"value":"led_2","id":"LED","alias":"dynamicDropdown"}]],"name":"led","enable":true},{"content":[[{"value":"veces_encendida_luz","id":"NAME","alias":"dynamicDropdown"},{"bloqInputId":"VALUE","value":{"content":[[{"value":"1","id":"VALUE","alias":"numberInput"}]],"name":"number","enable":true},"alias":"bloqInput"}]],"name":"setVariable","enable":true}],"name":"if","enable":true},{"content":[[{"bloqInputId":"ARG1","value":{"content":[[{"value":"boton_0","id":"SENSOR","alias":"dynamicDropdown"}]],"name":"readSensor","enable":true},"alias":"bloqInput"},{"value":"==","id":"OPERATOR","alias":"staticDropdown"},{"bloqInputId":"ARG2","value":{"content":[[{"value":"1","id":"VALUE","alias":"numberInput"}]],"name":"number","enable":true},"alias":"bloqInput"}]],"childs":[{"content":[[{"value":"LOW","id":"STATE","alias":"staticDropdown"},{"value":"led_1","id":"LED","alias":"dynamicDropdown"}]],"name":"led","enable":true},{"content":[[{"value":"1000","id":"TIME","alias":"numberInput"}]],"name":"wait","enable":true},{"content":[[{"value":"funcionando","id":"NAME","alias":"dynamicDropdown"},{"bloqInputId":"VALUE","value":{"content":[[{"value":"no","id":"TEXT","alias":"stringInput"}]],"name":"string","enable":true},"alias":"bloqInput"}]],"name":"setVariable","enable":true},{"content":[[]],"name":"break","enable":true}],"name":"if","enable":true}],"name":"while","enable":true},{"content":[[{"value":"veces_encendida_luz","id":"NAME","alias":"dynamicDropdown"},{"bloqInputId":"VALUE","value":{"content":[[{"value":"0","id":"VALUE","alias":"numberInput"}]],"name":"number","enable":true},"alias":"bloqInput"}]],"name":"setVariable","enable":true},{"content":[[{"bloqInputId":"ARG1","value":{"content":[[{"value":"boton_0","id":"SENSOR","alias":"dynamicDropdown"}]],"name":"readSensor","enable":true},"alias":"bloqInput"},{"value":"==","id":"OPERATOR","alias":"staticDropdown"},{"bloqInputId":"ARG2","value":{"content":[[{"value":"1","id":"VALUE","alias":"numberInput"}]],"name":"number","enable":true},"alias":"bloqInput"}]],"childs":[{"content":[[{"value":"LOW","id":"STATE","alias":"staticDropdown"},{"value":"led_1","id":"LED","alias":"dynamicDropdown"}]],"name":"led","enable":true},{"content":[[{"value":"1000","id":"TIME","alias":"numberInput"}]],"name":"wait","enable":true},{"content":[[{"value":"funcionando","id":"NAME","alias":"dynamicDropdown"},{"bloqInputId":"VALUE","value":{"content":[[{"value":"no","id":"TEXT","alias":"stringInput"}]],"name":"string","enable":true},"alias":"bloqInput"}]],"name":"setVariable","enable":true}],"name":"if","enable":true}],"name":"while","enable":true}],"name":"loopBloq","enable":true},"setup":{"content":[[]],"childs":[{"content":[[{"value":"LOW","id":"STATE","alias":"staticDropdown"},{"value":"led_1","id":"LED","alias":"dynamicDropdown"}]],"name":"led","enable":true},{"content":[[{"value":"LOW","id":"STATE","alias":"staticDropdown"},{"value":"led_2","id":"LED","alias":"dynamicDropdown"}]],"name":"led","enable":true}],"name":"setupBloq","enable":true},"vars":{"content":[[]],"childs":[{"content":[[{"value":"veces_encendida_luz","id":"NAME","alias":"varInput"},{"bloqInputId":"VALUE","value":{"content":[[{"value":"0","id":"VALUE","alias":"numberInput"}]],"name":"number","enable":true},"alias":"bloqInput"}]],"name":"declareVariable","enable":true},{"content":[[{"value":"funcionando","id":"NAME","alias":"varInput"},{"bloqInputId":"VALUE","value":{"content":[[{"value":"si","id":"TEXT","alias":"stringInput"}]],"name":"string","enable":true},"alias":"bloqInput"}]],"name":"declareVariable","enable":true}],"name":"varsBloq","enable":true}},"hardware":{"board":"bq ZUM","connections":[{"pinSourceUid":"7cdb1ab6-c057-4d58-ad0a-17fc8ae4ffa3","pinTargetUid":"6be0dd9d-2e52-4b7d-9dfc-c9edad53bd09"},{"pinSourceUid":"c9d93e39-99e2-4d23-8885-c1dd6082ac43","pinTargetUid":"6be0dd9d-2e52-4b7d-9dfc-c9edad53bd10"},{"pinSourceUid":"6190bb49-f811-4b86-aa4b-fb358e8acb0e","pinTargetUid":"6be0dd9d-2e52-4b7d-9dfc-c9edad53bd06"},{"pinSourceUid":"d5be000b-6655-4875-81b7-dca68c08c35e","pinTargetUid":"6be0dd9d-2e52-4b7d-9dfc-c9edad53ba04"}],"components":[{"height":83,"category":"leds","id":"led","pins":{"digital":["s"]},"name":"led_2","coordinates":{"y":14.124293785310735,"x":56.660293180369656},"width":55,"icon":"LED","pin":{"s":"4"},"endpoints":{"s":{"type":"digital","uid":"7cdb1ab6-c057-4d58-ad0a-17fc8ae4ffa3"}},"uid":"5def4f84-8f9b-4438-93b3-46bcd26c490c","connected":true},{"height":83,"category":"leds","id":"led","pins":{"digital":["s"]},"name":"led_1","coordinates":{"y":34.80225988700565,"x":69.59847036328873},"width":55,"icon":"LED","pin":{"s":"3"},"endpoints":{"s":{"type":"digital","uid":"c9d93e39-99e2-4d23-8885-c1dd6082ac43"}},"uid":"08f649b7-9b05-420e-99df-8d13b3b3287c","connected":true},{"height":73,"category":"sensors","id":"button","name":"boton_0","width":90,"pin":{"s":"7"},"uid":"93a620c9-c749-4d44-8d40-be6aec583739","connected":true,"type":"digital","pins":{"digital":["s"]},"coordinates":{"y":15.480225988700566,"x":44.23199490121096},"icon":"button","endpoints":{"s":{"type":"digital","uid":"6190bb49-f811-4b86-aa4b-fb358e8acb0e"}}},{"height":65,"category":"sensors","id":"ldrs","name":"sensor_de_luz_0","width":90,"pin":{"s":"A1"},"uid":"17b9de5c-4a05-43bd-8627-1f2868a0717a","connected":true,"type":"analog","pins":{"analog":["s"]},"coordinates":{"y":73.04452466907341,"x":47.95587280986373},"icon":"LDR","endpoints":{"s":{"type":"analog","uid":"d5be000b-6655-4875-81b7-dca68c08c35e"}}}]},"defaultTheme":"infotab_option_colorTheme","timesDownload":0,"timesAdded":0,"timesViewed":0}