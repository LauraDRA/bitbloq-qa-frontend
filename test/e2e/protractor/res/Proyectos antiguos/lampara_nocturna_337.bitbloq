{"code":"\n/***   Included libraries  ***/\n\n\n/***   Global variables and function definition  ***/\nint led1 = 3;int led2 = 4;int Pulsador = 7;int sensor_de_luz = A1;float estado = 0;\n\n/***   Setup  ***/\nvoid setup(){pinMode(led1, OUTPUT);pinMode(led2, OUTPUT);pinMode(Pulsador, INPUT);pinMode(sensor_de_luz, INPUT);}\n\n/***   Loop  ***/\nvoid loop(){float cantidadLuz = analogRead(A1);/*\nIdentificamos estados\n*/if(estado == 0 && digitalRead(7) == 1){if(cantidadLuz > 150){/*\nS1 -> lampara ON y de día\n*/estado = 1;delay(500);}if(cantidadLuz < 150){/*\nS2 -> lampara ON y de noche\n*/estado = 2;delay(500);}}if(estado == 1){if(digitalRead(7) == 1){/*\nS0 -> lampara OFF \n*/estado = 0;delay(500);}if(cantidadLuz < 150){/*\nS2 -> lampara ON y de noche\n*/estado = 2;}}if(estado == 2){delay(10000);/*\nS3 -> lampara ON, de noche y han pasado los 2 min de encendido\n*/estado = 3;}if(estado == 3){if(digitalRead(7) == 1){/*\nS0 -> lampara OFF \n*/estado = 0;delay(500);}if(cantidadLuz > 150){/*\nS1 -> lampara ON y de día\n*/estado = 1;}}/*\nAcciones en función de los estado de la lampara\n*/if(estado == 0){digitalWrite(led1,LOW);digitalWrite(led2,LOW);}if(estado == 1){digitalWrite(led1,HIGH);}if(estado == 2){digitalWrite(led1,HIGH);digitalWrite(led2,HIGH);}if(estado == 3){digitalWrite(led2,LOW);}}","description":"Prograna lámpara noctura:  cuando está en ON, se encendería al hacerse de noche, a los dos minutos se apagaría y no volvería a encenderse hasta la noche del día siguiente (porque debe haber luz de nuevo para volver a empezar).","name":"lampara_nocturna","corbelId":"55acae7ae4b00f538d041f75:15eed4d4-5259-4689-af71-2bed1e08238b","image":"default","userTags":[],"hardwareTags":["bq ZUM","led","button","ldrs"],"software":{"loop":{"content":[[]],"childs":[{"content":[[{"value":"cantidadLuz","id":"NAME","alias":"varInput"},{"bloqInputId":"VALUE","value":{"content":[[{"value":"sensor_de_luz","id":"SENSOR","alias":"dynamicDropdown"}]],"name":"readSensor","enable":true},"alias":"bloqInput"}]],"name":"declareVariable","enable":true},{"content":[[{"value":"Identificamos estados","id":"COMMENT","alias":"multilineCodeInput"}]],"name":"comment","enable":true},{"content":[[{"bloqInputId":"ARG1","value":{"content":[[{"bloqInputId":"ARG1","value":{"content":[[{"bloqInputId":"ARG1","value":{"content":[[{"value":"estado","id":"VAR","alias":"dynamicDropdown"}]],"name":"selectVariable","enable":true},"alias":"bloqInput"},{"value":"==","id":"OPERATOR","alias":"staticDropdown"},{"bloqInputId":"ARG2","value":{"content":[[{"value":"0","id":"VALUE","alias":"numberInput"}]],"name":"number","enable":true},"alias":"bloqInput"}]],"name":"equalityOperations","enable":true},"alias":"bloqInput"},{"value":"&&","id":"OPERATOR","alias":"staticDropdown"},{"bloqInputId":"ARG2","value":{"content":[[{"value":"Pulsador","id":"SENSOR","alias":"dynamicDropdown"}]],"name":"readSensor","enable":true},"alias":"bloqInput"}]],"name":"logicOperations","enable":true},"alias":"bloqInput"},{"value":"==","id":"OPERATOR","alias":"staticDropdown"},{"bloqInputId":"ARG2","value":{"content":[[{"value":"1","id":"VALUE","alias":"numberInput"}]],"name":"number","enable":true},"alias":"bloqInput"}]],"childs":[{"content":[[{"bloqInputId":"ARG1","value":{"content":[[{"value":"cantidadLuz","id":"VAR","alias":"dynamicDropdown"}]],"name":"selectVariable","enable":true},"alias":"bloqInput"},{"value":">","id":"OPERATOR","alias":"staticDropdown"},{"bloqInputId":"ARG2","value":{"content":[[{"value":"150","id":"VALUE","alias":"numberInput"}]],"name":"number","enable":true},"alias":"bloqInput"}]],"childs":[{"content":[[{"value":"S1 -> lampara ON y de día","id":"COMMENT","alias":"multilineCodeInput"}]],"name":"comment","enable":true},{"content":[[{"value":"estado","id":"NAME","alias":"dynamicDropdown"},{"bloqInputId":"VALUE","value":{"content":[[{"value":"1","id":"VALUE","alias":"numberInput"}]],"name":"number","enable":true},"alias":"bloqInput"}]],"name":"setVariable","enable":true},{"content":[[{"value":"500","id":"TIME","alias":"numberInput"}]],"name":"wait","enable":true}],"name":"if","enable":true},{"content":[[{"bloqInputId":"ARG1","value":{"content":[[{"value":"cantidadLuz","id":"VAR","alias":"dynamicDropdown"}]],"name":"selectVariable","enable":true},"alias":"bloqInput"},{"value":"<","id":"OPERATOR","alias":"staticDropdown"},{"bloqInputId":"ARG2","value":{"content":[[{"value":"150","id":"VALUE","alias":"numberInput"}]],"name":"number","enable":true},"alias":"bloqInput"}]],"childs":[{"content":[[{"value":"S2 -> lampara ON y de noche","id":"COMMENT","alias":"multilineCodeInput"}]],"name":"comment","enable":true},{"content":[[{"value":"estado","id":"NAME","alias":"dynamicDropdown"},{"bloqInputId":"VALUE","value":{"content":[[{"value":"2","id":"VALUE","alias":"numberInput"}]],"name":"number","enable":true},"alias":"bloqInput"}]],"name":"setVariable","enable":true},{"content":[[{"value":"500","id":"TIME","alias":"numberInput"}]],"name":"wait","enable":true}],"name":"if","enable":true}],"name":"if","enable":true},{"content":[[{"bloqInputId":"ARG1","value":{"content":[[{"value":"estado","id":"VAR","alias":"dynamicDropdown"}]],"name":"selectVariable","enable":true},"alias":"bloqInput"},{"value":"==","id":"OPERATOR","alias":"staticDropdown"},{"bloqInputId":"ARG2","value":{"content":[[{"value":"1","id":"VALUE","alias":"numberInput"}]],"name":"number","enable":true},"alias":"bloqInput"}]],"childs":[{"content":[[{"bloqInputId":"ARG1","value":{"content":[[{"value":"Pulsador","id":"SENSOR","alias":"dynamicDropdown"}]],"name":"readSensor","enable":true},"alias":"bloqInput"},{"value":"==","id":"OPERATOR","alias":"staticDropdown"},{"bloqInputId":"ARG2","value":{"content":[[{"value":"1","id":"VALUE","alias":"numberInput"}]],"name":"number","enable":true},"alias":"bloqInput"}]],"childs":[{"content":[[{"value":"S0 -> lampara OFF ","id":"COMMENT","alias":"multilineCodeInput"}]],"name":"comment","enable":true},{"content":[[{"value":"estado","id":"NAME","alias":"dynamicDropdown"},{"bloqInputId":"VALUE","value":{"content":[[{"value":"0","id":"VALUE","alias":"numberInput"}]],"name":"number","enable":true},"alias":"bloqInput"}]],"name":"setVariable","enable":true},{"content":[[{"value":"500","id":"TIME","alias":"numberInput"}]],"name":"wait","enable":true}],"name":"if","enable":true},{"content":[[{"bloqInputId":"ARG1","value":{"content":[[{"value":"cantidadLuz","id":"VAR","alias":"dynamicDropdown"}]],"name":"selectVariable","enable":true},"alias":"bloqInput"},{"value":"<","id":"OPERATOR","alias":"staticDropdown"},{"bloqInputId":"ARG2","value":{"content":[[{"value":"150","id":"VALUE","alias":"numberInput"}]],"name":"number","enable":true},"alias":"bloqInput"}]],"childs":[{"content":[[{"value":"S2 -> lampara ON y de noche","id":"COMMENT","alias":"multilineCodeInput"}]],"name":"comment","enable":true},{"content":[[{"value":"estado","id":"NAME","alias":"dynamicDropdown"},{"bloqInputId":"VALUE","value":{"content":[[{"value":"2","id":"VALUE","alias":"numberInput"}]],"name":"number","enable":true},"alias":"bloqInput"}]],"name":"setVariable","enable":true}],"name":"if","enable":true}],"name":"if","enable":true},{"content":[[{"bloqInputId":"ARG1","value":{"content":[[{"value":"estado","id":"VAR","alias":"dynamicDropdown"}]],"name":"selectVariable","enable":true},"alias":"bloqInput"},{"value":"==","id":"OPERATOR","alias":"staticDropdown"},{"bloqInputId":"ARG2","value":{"content":[[{"value":"2","id":"VALUE","alias":"numberInput"}]],"name":"number","enable":true},"alias":"bloqInput"}]],"childs":[{"content":[[{"value":"10000","id":"TIME","alias":"numberInput"}]],"name":"wait","enable":true},{"content":[[{"value":"S3 -> lampara ON, de noche y han pasado los 2 min de encendido","id":"COMMENT","alias":"multilineCodeInput"}]],"name":"comment","enable":true},{"content":[[{"value":"estado","id":"NAME","alias":"dynamicDropdown"},{"bloqInputId":"VALUE","value":{"content":[[{"value":"3","id":"VALUE","alias":"numberInput"}]],"name":"number","enable":true},"alias":"bloqInput"}]],"name":"setVariable","enable":true}],"name":"if","enable":true},{"content":[[{"bloqInputId":"ARG1","value":{"content":[[{"value":"estado","id":"VAR","alias":"dynamicDropdown"}]],"name":"selectVariable","enable":true},"alias":"bloqInput"},{"value":"==","id":"OPERATOR","alias":"staticDropdown"},{"bloqInputId":"ARG2","value":{"content":[[{"value":"3","id":"VALUE","alias":"numberInput"}]],"name":"number","enable":true},"alias":"bloqInput"}]],"childs":[{"content":[[{"bloqInputId":"ARG1","value":{"content":[[{"value":"Pulsador","id":"SENSOR","alias":"dynamicDropdown"}]],"name":"readSensor","enable":true},"alias":"bloqInput"},{"value":"==","id":"OPERATOR","alias":"staticDropdown"},{"bloqInputId":"ARG2","value":{"content":[[{"value":"1","id":"VALUE","alias":"numberInput"}]],"name":"number","enable":true},"alias":"bloqInput"}]],"childs":[{"content":[[{"value":"S0 -> lampara OFF ","id":"COMMENT","alias":"multilineCodeInput"}]],"name":"comment","enable":true},{"content":[[{"value":"estado","id":"NAME","alias":"dynamicDropdown"},{"bloqInputId":"VALUE","value":{"content":[[{"value":"0","id":"VALUE","alias":"numberInput"}]],"name":"number","enable":true},"alias":"bloqInput"}]],"name":"setVariable","enable":true},{"content":[[{"value":"500","id":"TIME","alias":"numberInput"}]],"name":"wait","enable":true}],"name":"if","enable":true},{"content":[[{"bloqInputId":"ARG1","value":{"content":[[{"value":"cantidadLuz","id":"VAR","alias":"dynamicDropdown"}]],"name":"selectVariable","enable":true},"alias":"bloqInput"},{"value":">","id":"OPERATOR","alias":"staticDropdown"},{"bloqInputId":"ARG2","value":{"content":[[{"value":"150","id":"VALUE","alias":"numberInput"}]],"name":"number","enable":true},"alias":"bloqInput"}]],"childs":[{"content":[[{"value":"S1 -> lampara ON y de día","id":"COMMENT","alias":"multilineCodeInput"}]],"name":"comment","enable":true},{"content":[[{"value":"estado","id":"NAME","alias":"dynamicDropdown"},{"bloqInputId":"VALUE","value":{"content":[[{"value":"1","id":"VALUE","alias":"numberInput"}]],"name":"number","enable":true},"alias":"bloqInput"}]],"name":"setVariable","enable":true}],"name":"if","enable":true}],"name":"if","enable":true},{"content":[[{"value":"Acciones en función de los estado de la lampara","id":"COMMENT","alias":"multilineCodeInput"}]],"name":"comment","enable":true},{"content":[[{"bloqInputId":"ARG1","value":{"content":[[{"value":"estado","id":"VAR","alias":"dynamicDropdown"}]],"name":"selectVariable","enable":true},"alias":"bloqInput"},{"value":"==","id":"OPERATOR","alias":"staticDropdown"},{"bloqInputId":"ARG2","value":{"content":[[{"value":"0","id":"VALUE","alias":"numberInput"}]],"name":"number","enable":true},"alias":"bloqInput"}]],"childs":[{"content":[[{"value":"LOW","id":"STATE","alias":"staticDropdown"},{"value":"led1","id":"LED","alias":"dynamicDropdown"}]],"name":"led","enable":true},{"content":[[{"value":"LOW","id":"STATE","alias":"staticDropdown"},{"value":"led2","id":"LED","alias":"dynamicDropdown"}]],"name":"led","enable":true}],"name":"if","enable":true},{"content":[[{"bloqInputId":"ARG1","value":{"content":[[{"value":"estado","id":"VAR","alias":"dynamicDropdown"}]],"name":"selectVariable","enable":true},"alias":"bloqInput"},{"value":"==","id":"OPERATOR","alias":"staticDropdown"},{"bloqInputId":"ARG2","value":{"content":[[{"value":"1","id":"VALUE","alias":"numberInput"}]],"name":"number","enable":true},"alias":"bloqInput"}]],"childs":[{"content":[[{"value":"HIGH","id":"STATE","alias":"staticDropdown"},{"value":"led1","id":"LED","alias":"dynamicDropdown"}]],"name":"led","enable":true}],"name":"if","enable":true},{"content":[[{"bloqInputId":"ARG1","value":{"content":[[{"value":"estado","id":"VAR","alias":"dynamicDropdown"}]],"name":"selectVariable","enable":true},"alias":"bloqInput"},{"value":"==","id":"OPERATOR","alias":"staticDropdown"},{"bloqInputId":"ARG2","value":{"content":[[{"value":"2","id":"VALUE","alias":"numberInput"}]],"name":"number","enable":true},"alias":"bloqInput"}]],"childs":[{"content":[[{"value":"HIGH","id":"STATE","alias":"staticDropdown"},{"value":"led1","id":"LED","alias":"dynamicDropdown"}]],"name":"led","enable":true},{"content":[[{"value":"HIGH","id":"STATE","alias":"staticDropdown"},{"value":"led2","id":"LED","alias":"dynamicDropdown"}]],"name":"led","enable":true}],"name":"if","enable":true},{"content":[[{"bloqInputId":"ARG1","value":{"content":[[{"value":"estado","id":"VAR","alias":"dynamicDropdown"}]],"name":"selectVariable","enable":true},"alias":"bloqInput"},{"value":"==","id":"OPERATOR","alias":"staticDropdown"},{"bloqInputId":"ARG2","value":{"content":[[{"value":"3","id":"VALUE","alias":"numberInput"}]],"name":"number","enable":true},"alias":"bloqInput"}]],"childs":[{"content":[[{"value":"LOW","id":"STATE","alias":"staticDropdown"},{"value":"led2","id":"LED","alias":"dynamicDropdown"}]],"name":"led","enable":true}],"name":"if","enable":true}],"name":"loopBloq","enable":true},"setup":{"content":[[]],"childs":[],"name":"setupBloq","enable":true},"vars":{"content":[[]],"childs":[{"content":[[{"value":"estado","id":"NAME","alias":"varInput"},{"bloqInputId":"VALUE","value":{"content":[[{"value":"0","id":"VALUE","alias":"numberInput"}]],"name":"number","enable":true},"alias":"bloqInput"}]],"name":"declareVariable","enable":true}],"name":"varsBloq","enable":true}},"hardware":{"board":"bq ZUM","connections":[{"pinSourceUid":"78f511df-291f-40b7-a9ec-3da757978918","pinTargetUid":"6be0dd9d-2e52-4b7d-9dfc-c9edad53bd10"},{"pinSourceUid":"a8c1612c-8ae4-46df-bc48-d77d0271dd40","pinTargetUid":"6be0dd9d-2e52-4b7d-9dfc-c9edad53bd06"},{"pinSourceUid":"56260877-fc7e-451a-a5b9-19a8ca860c9f","pinTargetUid":"6be0dd9d-2e52-4b7d-9dfc-c9edad53bd09"},{"pinSourceUid":"675838ee-de12-423c-8385-fa210103a845","pinTargetUid":"6be0dd9d-2e52-4b7d-9dfc-c9edad53ba04"}],"components":[{"height":83,"category":"leds","id":"led","pins":{"digital":["s"]},"name":"led1","coordinates":{"y":7.6923076923076925,"x":69.61325966850829},"width":55,"icon":"LED","pin":{"s":"3"},"endpoints":{"s":{"type":"digital","uid":"78f511df-291f-40b7-a9ec-3da757978918"}},"uid":"3b0fb450-8fd5-4ec0-89f9-12bc993dd71c","connected":true},{"height":73,"category":"sensors","id":"button","name":"Pulsador","width":90,"pin":{"s":"7"},"uid":"35418d89-231b-4ea0-8de8-d1b6cf2974c4","connected":true,"type":"digital","pins":{"digital":["s"]},"coordinates":{"y":5.253283302063791,"x":28.084714548802946},"icon":"button","endpoints":{"s":{"type":"digital","uid":"a8c1612c-8ae4-46df-bc48-d77d0271dd40"}}},{"height":83,"category":"leds","id":"led","pins":{"digital":["s"]},"name":"led2","coordinates":{"y":8.067542213883677,"x":53.40699815837937},"width":55,"icon":"LED","pin":{"s":"4"},"endpoints":{"s":{"type":"digital","uid":"56260877-fc7e-451a-a5b9-19a8ca860c9f"}},"uid":"f07a8d46-68dd-4eed-bab2-167a154e9400","connected":true},{"height":65,"category":"sensors","id":"ldrs","name":"sensor_de_luz","width":90,"pin":{"s":"A1"},"uid":"9f36e557-8d6d-4264-b85e-c0ba17258f37","connected":true,"type":"analog","pins":{"analog":["s"]},"coordinates":{"y":75.60975609756098,"x":44.65930018416206},"icon":"LDR","endpoints":{"s":{"type":"analog","uid":"675838ee-de12-423c-8385-fa210103a845"}}}]},"defaultTheme":"infotab_option_colorTheme","timesDownload":0,"timesAdded":0,"timesViewed":0}