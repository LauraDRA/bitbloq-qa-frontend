{"name":"P2_velocidad_patines","description":"Proyecto para añadir electrónica a un patín para que mida la velocidad lineal en metros por segundo a la que estás patinando y la muestre por el LCD en tiempo real.","videoUrl":"","code":"\n/***   Included libraries  ***/\n#include <Wire.h>\n#include <BitbloqLiquidCrystal.h>\n#include <SoftwareSerial.h>\n#include <BitbloqSoftwareSerial.h>\n\n\n/***   Global variables and function definition  ***/\nLiquidCrystal lcd_0(0);int sensor_infrarrojos_0 = 7;bqSoftwareSerial puerto_serie_0(0,1,9600);float tiempo = 0;float velocidad_circular = 0;float velocidad_lineal = 0;float tiempo_parcial = 0;bool blanco = false;\n\n/***   Setup  ***/\nvoid setup(){lcd_0.begin(16, 2);lcd_0.clear();pinMode(sensor_infrarrojos_0, INPUT);}\n\n/***   Loop  ***/\nvoid loop(){if(((digitalRead(sensor_infrarrojos_0) == 1) && (blanco == false))){tiempo = (millis() - tiempo_parcial);tiempo = (tiempo / 1000);velocidad_lineal = (0.22 / tiempo);lcd_0.setCursor(0,0);lcd_0.print(String(String(velocidad_lineal))+String(\"   \"));puerto_serie_0.println(velocidad_lineal);tiempo_parcial = millis();blanco = true;}if(((digitalRead(sensor_infrarrojos_0) == 0) && (blanco == true))){blanco = false;}}","image":"custom","userTags":[],"hardwareTags":["irs","sp","lcd","bq ZUM"],"software":{"vars":{"name":"varsBloq","content":[[]],"enable":true,"childs":[{"name":"declareVariable","content":[[{"alias":"varInput","id":"NAME","value":"tiempo"},{"alias":"bloqInput","bloqInputId":"VALUE","value":{"name":"number","content":[[{"alias":"numberInput","id":"VALUE","value":"0"}]],"enable":true}}]],"enable":true},{"name":"declareVariable","content":[[{"alias":"varInput","id":"NAME","value":"velocidad_circular"},{"alias":"bloqInput","bloqInputId":"VALUE","value":{"name":"number","content":[[{"alias":"numberInput","id":"VALUE","value":"0"}]],"enable":true}}]],"enable":true},{"name":"declareVariable","content":[[{"alias":"varInput","id":"NAME","value":"velocidad_lineal"},{"alias":"bloqInput","bloqInputId":"VALUE","value":{"name":"number","content":[[{"alias":"numberInput","id":"VALUE","value":"0"}]],"enable":true}}]],"enable":true},{"name":"declareVariable","content":[[{"alias":"varInput","id":"NAME","value":"tiempo_parcial"},{"alias":"bloqInput","bloqInputId":"VALUE","value":{"name":"number","content":[[{"alias":"numberInput","id":"VALUE","value":"0"}]],"enable":true}}]],"enable":true},{"name":"declareVariable","content":[[{"alias":"varInput","id":"NAME","value":"blanco"},{"alias":"bloqInput","bloqInputId":"VALUE","value":{"name":"boolean","content":[[{"alias":"staticDropdown","id":"STATE","value":"false"}]],"enable":true}}]],"enable":true}]},"setup":{"name":"setupBloq","content":[[]],"enable":true,"childs":[]},"loop":{"name":"loopBloq","content":[[]],"enable":true,"childs":[{"name":"ifAdvanced","content":[[{"alias":"bloqInput","bloqInputId":"CONDITION","value":{"name":"logicOperations","content":[[{"alias":"bloqInput","bloqInputId":"ARG1","value":{"name":"equalityOperations","content":[[{"alias":"bloqInput","bloqInputId":"ARG1","value":{"name":"readSensor","content":[[{"alias":"dynamicDropdown","id":"SENSOR","value":"sensor_infrarrojos_0"}]],"enable":true}},{"alias":"staticDropdown","id":"OPERATOR","value":"=="},{"alias":"bloqInput","bloqInputId":"ARG2","value":{"name":"number","content":[[{"alias":"numberInput","id":"VALUE","value":"1"}]],"enable":true}}]],"enable":true}},{"alias":"staticDropdown","id":"OPERATOR","value":"&&"},{"alias":"bloqInput","bloqInputId":"ARG2","value":{"name":"equalityOperations","content":[[{"alias":"bloqInput","bloqInputId":"ARG1","value":{"name":"selectVariable","content":[[{"alias":"dynamicDropdown","id":"VAR","value":"blanco"}]],"enable":true}},{"alias":"staticDropdown","id":"OPERATOR","value":"=="},{"alias":"bloqInput","bloqInputId":"ARG2","value":{"name":"boolean","content":[[{"alias":"staticDropdown","id":"STATE","value":"false"}]],"enable":true}}]],"enable":true}}]],"enable":true}}]],"enable":true,"childs":[{"name":"setVariable","content":[[{"alias":"dynamicDropdown","id":"NAME","value":"tiempo"},{"alias":"bloqInput","bloqInputId":"VALUE","value":{"name":"basicOperations","content":[[{"alias":"bloqInput","bloqInputId":"ARG1","value":{"name":"millis","content":[[]],"enable":true}},{"alias":"staticDropdown","id":"OPERATOR","value":"-"},{"alias":"bloqInput","bloqInputId":"ARG2","value":{"name":"selectVariable","content":[[{"alias":"dynamicDropdown","id":"VAR","value":"tiempo_parcial"}]],"enable":true}}]],"enable":true}}]],"enable":true},{"name":"setVariable","content":[[{"alias":"dynamicDropdown","id":"NAME","value":"tiempo"},{"alias":"bloqInput","bloqInputId":"VALUE","value":{"name":"basicOperations","content":[[{"alias":"bloqInput","bloqInputId":"ARG1","value":{"name":"selectVariable","content":[[{"alias":"dynamicDropdown","id":"VAR","value":"tiempo"}]],"enable":true}},{"alias":"staticDropdown","id":"OPERATOR","value":"/"},{"alias":"bloqInput","bloqInputId":"ARG2","value":{"name":"number","content":[[{"alias":"numberInput","id":"VALUE","value":"1000"}]],"enable":true}}]],"enable":true}}]],"enable":true},{"name":"setVariable","content":[[{"alias":"dynamicDropdown","id":"NAME","value":"velocidad_lineal"},{"alias":"bloqInput","bloqInputId":"VALUE","value":{"name":"basicOperations","content":[[{"alias":"bloqInput","bloqInputId":"ARG1","value":{"name":"number","content":[[{"alias":"numberInput","id":"VALUE","value":"0.22"}]],"enable":true}},{"alias":"staticDropdown","id":"OPERATOR","value":"/"},{"alias":"bloqInput","bloqInputId":"ARG2","value":{"name":"selectVariable","content":[[{"alias":"dynamicDropdown","id":"VAR","value":"tiempo"}]],"enable":true}}]],"enable":true}}]],"enable":true},{"name":"lcdWritePositionAdvanced-v1","content":[[{"alias":"bloqInput","bloqInputId":"TEXT","value":{"name":"stringSum","content":[[{"alias":"bloqInput","bloqInputId":"ARG1","value":{"name":"stringCreate","content":[[{"alias":"bloqInput","bloqInputId":"TEXT","value":{"name":"selectVariable","content":[[{"alias":"dynamicDropdown","id":"VAR","value":"velocidad_lineal"}]],"enable":true}}]],"enable":true}},{"alias":"bloqInput","bloqInputId":"ARG2","value":{"name":"string","content":[[{"alias":"stringInput","id":"TEXT","value":"   "}]],"enable":true}}]],"enable":true}},{"alias":"bloqInput","bloqInputId":"LCD","value":{"name":"hwVariable","content":[[{"alias":"dynamicDropdown","id":"COMPONENT","value":"lcd_0"}]],"enable":true}},{"alias":"bloqInput","bloqInputId":"COLUMN","value":{"name":"number","content":[[{"alias":"numberInput","id":"VALUE","value":"0"}]],"enable":true}},{"alias":"bloqInput","bloqInputId":"ROW","value":{"name":"number","content":[[{"alias":"numberInput","id":"VALUE","value":"0"}]],"enable":true}}]],"enable":true},{"name":"serialSend-v1","content":[[{"alias":"dynamicDropdown","id":"SERIAL","value":"puerto_serie_0"},{"alias":"bloqInput","bloqInputId":"DATA","value":{"name":"selectVariable","content":[[{"alias":"dynamicDropdown","id":"VAR","value":"velocidad_lineal"}]],"enable":true}},{"alias":"staticDropdown","id":"LN","value":"println"}]],"enable":true},{"name":"setVariable","content":[[{"alias":"dynamicDropdown","id":"NAME","value":"tiempo_parcial"},{"alias":"bloqInput","bloqInputId":"VALUE","value":{"name":"millis","content":[[]],"enable":true}}]],"enable":true},{"name":"setVariable","content":[[{"alias":"dynamicDropdown","id":"NAME","value":"blanco"},{"alias":"bloqInput","bloqInputId":"VALUE","value":{"name":"boolean","content":[[{"alias":"staticDropdown","id":"STATE","value":"true"}]],"enable":true}}]],"enable":true}]},{"name":"ifAdvanced","content":[[{"alias":"bloqInput","bloqInputId":"CONDITION","value":{"name":"logicOperations","content":[[{"alias":"bloqInput","bloqInputId":"ARG1","value":{"name":"equalityOperations","content":[[{"alias":"bloqInput","bloqInputId":"ARG1","value":{"name":"readSensor","content":[[{"alias":"dynamicDropdown","id":"SENSOR","value":"sensor_infrarrojos_0"}]],"enable":true}},{"alias":"staticDropdown","id":"OPERATOR","value":"=="},{"alias":"bloqInput","bloqInputId":"ARG2","value":{"name":"number","content":[[{"alias":"numberInput","id":"VALUE","value":"0"}]],"enable":true}}]],"enable":true}},{"alias":"staticDropdown","id":"OPERATOR","value":"&&"},{"alias":"bloqInput","bloqInputId":"ARG2","value":{"name":"equalityOperations","content":[[{"alias":"bloqInput","bloqInputId":"ARG1","value":{"name":"selectVariable","content":[[{"alias":"dynamicDropdown","id":"VAR","value":"blanco"}]],"enable":true}},{"alias":"staticDropdown","id":"OPERATOR","value":"=="},{"alias":"bloqInput","bloqInputId":"ARG2","value":{"name":"boolean","content":[[{"alias":"staticDropdown","id":"STATE","value":"true"}]],"enable":true}}]],"enable":true}}]],"enable":true}}]],"enable":true,"childs":[{"name":"setVariable","content":[[{"alias":"dynamicDropdown","id":"NAME","value":"blanco"},{"alias":"bloqInput","bloqInputId":"VALUE","value":{"name":"boolean","content":[[{"alias":"staticDropdown","id":"STATE","value":"false"}]],"enable":true}}]],"enable":true}]}]}},"hardware":{"board":"bq ZUM","robot":null,"connections":[{"pinSourceUid":"b68547f8-2bb2-4f7c-855f-3c8d966e20c7","pinTargetUid":"6be0dd9d-2e52-4b7d-9dfc-c9edad53bd06"},{"pinSourceUid":"70a50db4-6215-4295-bdf9-8318bf2e4ee2","pinTargetUid":"6be0dd9d-2e52-4b7d-9dfc-c9edad53bc05"},{"pinSourceUid":"0e5563fe-a282-4f42-8a8a-85a91efb8cdb","pinTargetUid":"6be0dd9d-2e52-4b7d-9dfc-c9edad53ba01"},{"pinSourceUid":"62aada3a-ad25-4a7b-a31d-005d0f56583a","pinTargetUid":"6be0dd9d-2e52-4b7d-9dfc-c9edad53ba00"}],"components":[{"id":"irs","type":"digital","width":90,"height":77,"pins":{"digital":["s"]},"dragtype":"components","coordinates":{"x":46.03658536585366,"y":20.681818181818183},"category":"sensors","name":"sensor_infrarrojos_0","connected":true,"uid":"ade7796c-cd84-4f6b-bb9f-31e6326c6cb2","pin":{"s":"7"},"endpoints":{"s":{"type":"digital","uid":"b68547f8-2bb2-4f7c-855f-3c8d966e20c7"}}},{"id":"sp","baudRate":"9600","width":115,"height":71,"pin":{"s":"serial"},"pins":{"serial":["s"]},"dragtype":"components","coordinates":{"x":26.707317073170735,"y":45},"category":"serialElements","name":"puerto_serie_0","connected":true,"uid":"cc498af6-f890-456c-8ef5-5383babf7953","endpoints":{"s":{"type":"serial","uid":"70a50db4-6215-4295-bdf9-8318bf2e4ee2"}}},{"id":"lcd","width":170,"height":93,"pin":{"sda":"A4","scl":"A5"},"pins":{"analog":["sda","scl"]},"dragtype":"components","coordinates":{"x":51.707317073170735,"y":73.06818181818183},"category":"lcds","name":"lcd_0","connected":true,"uid":"62715f8b-39f6-4e8f-bdbc-d61b3c69d033","endpoints":{"sda":{"type":"analog","uid":"0e5563fe-a282-4f42-8a8a-85a91efb8cdb"},"scl":{"type":"analog","uid":"62aada3a-ad25-4a7b-a31d-005d0f56583a"}}}]},"defaultTheme":"infotab_option_colorTheme","timesDownload":0,"timesAdded":0,"timesViewed":0}