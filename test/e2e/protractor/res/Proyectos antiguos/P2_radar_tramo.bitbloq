{"name":"P2_radar_tramo","description":"","videoUrl":"","code":"\n/***   Included libraries  ***/\n#include <SoftwareSerial.h>\n#include <BitbloqSoftwareSerial.h>\n\n\n/***   Global variables and function definition  ***/\nint led_fin = 12;int led_inicio = 2;int LDR_inicio = A5;int LDR_fin = A0;bqSoftwareSerial puerto_serie_0(0,1,9600);float distancia = 0.30;float tiempo = 0;float velocidad = 0;float v_medio_ini = 0;float v_medio_fin = 0;\n\n/***   Setup  ***/\nvoid setup(){pinMode(led_fin, OUTPUT);pinMode(led_inicio, OUTPUT);pinMode(LDR_inicio, INPUT);pinMode(LDR_fin, INPUT);digitalWrite(led_fin,HIGH);digitalWrite(led_inicio,HIGH);delay(5000);v_medio_ini = analogRead(LDR_inicio);v_medio_fin = analogRead(LDR_fin);}\n\n/***   Loop  ***/\nvoid loop(){if(analogRead(LDR_inicio) < (v_medio_ini - 20)){tiempo = millis();while (analogRead(LDR_fin) > (v_medio_fin - 20)){/*\nEspera a que el monopatín pase por el segundo sensor\n*/}tiempo = (millis() - tiempo);tiempo = (tiempo / 1000);velocidad = (distancia / tiempo);puerto_serie_0.print(\"Tiempo: \");puerto_serie_0.println(tiempo);puerto_serie_0.print(\"Velocidad:  \");puerto_serie_0.println(velocidad);delay(5000);}}","image":"default","userTags":[],"hardwareTags":["sp","led","ldrs","bq ZUM"],"software":{"vars":{"name":"varsBloq","content":[[]],"enable":true,"childs":[{"name":"declareVariable","content":[[{"alias":"varInput","id":"NAME","value":"distancia"},{"alias":"bloqInput","bloqInputId":"VALUE","value":{"name":"number","content":[[{"alias":"numberInput","id":"VALUE","value":"0.30"}]],"enable":true}}]],"enable":true},{"name":"declareVariable","content":[[{"alias":"varInput","id":"NAME","value":"tiempo"},{"alias":"bloqInput","bloqInputId":"VALUE","value":{"name":"number","content":[[{"alias":"numberInput","id":"VALUE","value":"0"}]],"enable":true}}]],"enable":true},{"name":"declareVariable","content":[[{"alias":"varInput","id":"NAME","value":"velocidad"},{"alias":"bloqInput","bloqInputId":"VALUE","value":{"name":"number","content":[[{"alias":"numberInput","id":"VALUE","value":"0"}]],"enable":true}}]],"enable":true},{"name":"declareVariable","content":[[{"alias":"varInput","id":"NAME","value":"v_medio_ini"},{"alias":"bloqInput","bloqInputId":"VALUE","value":{"name":"number","content":[[{"alias":"numberInput","id":"VALUE","value":"0"}]],"enable":true}}]],"enable":true},{"name":"declareVariable","content":[[{"alias":"varInput","id":"NAME","value":"v_medio_fin"},{"alias":"bloqInput","bloqInputId":"VALUE","value":{"name":"number","content":[[{"alias":"numberInput","id":"VALUE","value":"0"}]],"enable":true}}]],"enable":true}]},"setup":{"name":"setupBloq","content":[[]],"enable":true,"childs":[{"name":"led","content":[[{"alias":"staticDropdown","id":"STATE","value":"HIGH"},{"alias":"dynamicDropdown","id":"LED","value":"led_fin"}]],"enable":true},{"name":"led","content":[[{"alias":"staticDropdown","id":"STATE","value":"HIGH"},{"alias":"dynamicDropdown","id":"LED","value":"led_inicio"}]],"enable":true},{"name":"wait","content":[[{"alias":"numberInput","id":"TIME","value":"5000"}]],"enable":true},{"name":"setVariable","content":[[{"alias":"dynamicDropdown","id":"NAME","value":"v_medio_ini"},{"alias":"bloqInput","bloqInputId":"VALUE","value":{"name":"readSensor","content":[[{"alias":"dynamicDropdown","id":"SENSOR","value":"LDR_inicio"}]],"enable":true}}]],"enable":true},{"name":"setVariable","content":[[{"alias":"dynamicDropdown","id":"NAME","value":"v_medio_fin"},{"alias":"bloqInput","bloqInputId":"VALUE","value":{"name":"readSensor","content":[[{"alias":"dynamicDropdown","id":"SENSOR","value":"LDR_fin"}]],"enable":true}}]],"enable":true}]},"loop":{"name":"loopBloq","content":[[]],"enable":true,"childs":[{"name":"if","content":[[{"alias":"bloqInput","bloqInputId":"ARG1","value":{"name":"readSensor","content":[[{"alias":"dynamicDropdown","id":"SENSOR","value":"LDR_inicio"}]],"enable":true}},{"alias":"staticDropdown","id":"OPERATOR","value":"<"},{"alias":"bloqInput","bloqInputId":"ARG2","value":{"name":"basicOperations","content":[[{"alias":"bloqInput","bloqInputId":"ARG1","value":{"name":"selectVariable","content":[[{"alias":"dynamicDropdown","id":"VAR","value":"v_medio_ini"}]],"enable":true}},{"alias":"staticDropdown","id":"OPERATOR","value":"-"},{"alias":"bloqInput","bloqInputId":"ARG2","value":{"name":"number","content":[[{"alias":"numberInput","id":"VALUE","value":"20"}]],"enable":true}}]],"enable":true}}]],"enable":true,"childs":[{"name":"setVariable","content":[[{"alias":"dynamicDropdown","id":"NAME","value":"tiempo"},{"alias":"bloqInput","bloqInputId":"VALUE","value":{"name":"millis","content":[[]],"enable":true}}]],"enable":true},{"name":"while","content":[[{"alias":"bloqInput","bloqInputId":"ARG1","value":{"name":"readSensor","content":[[{"alias":"dynamicDropdown","id":"SENSOR","value":"LDR_fin"}]],"enable":true}},{"alias":"staticDropdown","id":"OPERATOR","value":">"},{"alias":"bloqInput","bloqInputId":"ARG2","value":{"name":"basicOperations","content":[[{"alias":"bloqInput","bloqInputId":"ARG1","value":{"name":"selectVariable","content":[[{"alias":"dynamicDropdown","id":"VAR","value":"v_medio_fin"}]],"enable":true}},{"alias":"staticDropdown","id":"OPERATOR","value":"-"},{"alias":"bloqInput","bloqInputId":"ARG2","value":{"name":"number","content":[[{"alias":"numberInput","id":"VALUE","value":"20"}]],"enable":true}}]],"enable":true}}]],"enable":true,"childs":[{"name":"comment","content":[[{"alias":"multilineCommentInput","id":"COMMENT","value":"Espera a que el monopatín pase por el segundo sensor"}]],"enable":true}]},{"name":"setVariable","content":[[{"alias":"dynamicDropdown","id":"NAME","value":"tiempo"},{"alias":"bloqInput","bloqInputId":"VALUE","value":{"name":"basicOperations","content":[[{"alias":"bloqInput","bloqInputId":"ARG1","value":{"name":"millis","content":[[]],"enable":true}},{"alias":"staticDropdown","id":"OPERATOR","value":"-"},{"alias":"bloqInput","bloqInputId":"ARG2","value":{"name":"selectVariable","content":[[{"alias":"dynamicDropdown","id":"VAR","value":"tiempo"}]],"enable":true}}]],"enable":true}}]],"enable":true},{"name":"setVariable","content":[[{"alias":"dynamicDropdown","id":"NAME","value":"tiempo"},{"alias":"bloqInput","bloqInputId":"VALUE","value":{"name":"basicOperations","content":[[{"alias":"bloqInput","bloqInputId":"ARG1","value":{"name":"selectVariable","content":[[{"alias":"dynamicDropdown","id":"VAR","value":"tiempo"}]],"enable":true}},{"alias":"staticDropdown","id":"OPERATOR","value":"/"},{"alias":"bloqInput","bloqInputId":"ARG2","value":{"name":"number","content":[[{"alias":"numberInput","id":"VALUE","value":"1000"}]],"enable":true}}]],"enable":true}}]],"enable":true},{"name":"setVariable","content":[[{"alias":"dynamicDropdown","id":"NAME","value":"velocidad"},{"alias":"bloqInput","bloqInputId":"VALUE","value":{"name":"basicOperations","content":[[{"alias":"bloqInput","bloqInputId":"ARG1","value":{"name":"selectVariable","content":[[{"alias":"dynamicDropdown","id":"VAR","value":"distancia"}]],"enable":true}},{"alias":"staticDropdown","id":"OPERATOR","value":"/"},{"alias":"bloqInput","bloqInputId":"ARG2","value":{"name":"selectVariable","content":[[{"alias":"dynamicDropdown","id":"VAR","value":"tiempo"}]],"enable":true}}]],"enable":true}}]],"enable":true},{"name":"serialSend-v1","content":[[{"alias":"dynamicDropdown","id":"SERIAL","value":"puerto_serie_0"},{"alias":"bloqInput","bloqInputId":"DATA","value":{"name":"string","content":[[{"alias":"stringInput","id":"TEXT","value":"Tiempo: "}]],"enable":true}},{"alias":"staticDropdown","id":"LN","value":"print"}]],"enable":true},{"name":"serialSend-v1","content":[[{"alias":"dynamicDropdown","id":"SERIAL","value":"puerto_serie_0"},{"alias":"bloqInput","bloqInputId":"DATA","value":{"name":"selectVariable","content":[[{"alias":"dynamicDropdown","id":"VAR","value":"tiempo"}]],"enable":true}},{"alias":"staticDropdown","id":"LN","value":"println"}]],"enable":true},{"name":"serialSend-v1","content":[[{"alias":"dynamicDropdown","id":"SERIAL","value":"puerto_serie_0"},{"alias":"bloqInput","bloqInputId":"DATA","value":{"name":"string","content":[[{"alias":"stringInput","id":"TEXT","value":"Velocidad:  "}]],"enable":true}},{"alias":"staticDropdown","id":"LN","value":"print"}]],"enable":true},{"name":"serialSend-v1","content":[[{"alias":"dynamicDropdown","id":"SERIAL","value":"puerto_serie_0"},{"alias":"bloqInput","bloqInputId":"DATA","value":{"name":"selectVariable","content":[[{"alias":"dynamicDropdown","id":"VAR","value":"velocidad"}]],"enable":true}},{"alias":"staticDropdown","id":"LN","value":"println"}]],"enable":true},{"name":"wait","content":[[{"alias":"numberInput","id":"TIME","value":"5000"}]],"enable":true}]}]}},"hardware":{"board":"bq ZUM","connections":[{"pinSourceUid":"4fe2709b-083b-42e3-97d5-63089418f164","pinTargetUid":"6be0dd9d-2e52-4b7d-9dfc-c9edad53bc05"},{"pinSourceUid":"1fc5b3e7-f0fb-4248-8de4-8d1ad5d36f15","pinTargetUid":"6be0dd9d-2e52-4b7d-9dfc-c9edad53bd01"},{"pinSourceUid":"b7feb2c8-cc36-4096-9dc7-a5c93201acdd","pinTargetUid":"6be0dd9d-2e52-4b7d-9dfc-c9edad53ba00"},{"pinSourceUid":"07f111b5-02b9-44f1-a270-b50eedc2b6df","pinTargetUid":"6be0dd9d-2e52-4b7d-9dfc-c9edad53ba05"},{"pinSourceUid":"42034c2b-e42f-4188-8346-6203a42f3272","pinTargetUid":"6be0dd9d-2e52-4b7d-9dfc-c9edad53bd11"}],"components":[{"height":71,"category":"serialElements","id":"sp","name":"puerto_serie_0","width":115,"pin":{"s":"serial"},"uid":"aec297f3-6571-4482-8695-13e35890597b","connected":true,"baudRate":"9600","pins":{"serial":["s"]},"coordinates":{"x":29.590117911285795,"y":46.4859437751004},"icon":"serial","endpoints":{"s":{"type":"serial","uid":"4fe2709b-083b-42e3-97d5-63089418f164"}}},{"id":"led","width":55,"height":83,"pins":{"digital":["s"]},"dragtype":"components","coordinates":{"x":45.9292532285233,"y":25.702811244979916},"category":"leds","name":"led_fin","connected":true,"uid":"647b8ccd-7357-488b-ab3f-3463663a67d7","pin":{"s":"12"},"endpoints":{"s":{"type":"digital","uid":"1fc5b3e7-f0fb-4248-8de4-8d1ad5d36f15"}}},{"id":"ldrs","type":"analog","width":90,"height":65,"pins":{"analog":["s"]},"dragtype":"components","coordinates":{"x":55.24985962942167,"y":64.95983935742971},"category":"sensors","name":"LDR_inicio","connected":true,"uid":"a0c8c679-fc2f-46e9-ad83-e337e6393adc","pin":{"s":"A5"},"endpoints":{"s":{"type":"analog","uid":"b7feb2c8-cc36-4096-9dc7-a5c93201acdd"}}},{"id":"ldrs","type":"analog","width":90,"height":65,"pins":{"analog":["s"]},"dragtype":"components","coordinates":{"x":49.57888826501965,"y":64.85943775100401},"category":"sensors","name":"LDR_fin","connected":true,"uid":"f3ac7b70-0025-454a-a6ee-542173da1220","pin":{"s":"A0"},"endpoints":{"s":{"type":"analog","uid":"07f111b5-02b9-44f1-a270-b50eedc2b6df"}}},{"id":"led","width":55,"height":83,"pins":{"digital":["s"]},"dragtype":"components","coordinates":{"x":56.48512071869736,"y":26.104417670682732},"category":"leds","name":"led_inicio","connected":true,"uid":"f0e8a126-2bf0-4446-94c4-7496cc94ff6d","pin":{"s":"2"},"endpoints":{"s":{"type":"digital","uid":"42034c2b-e42f-4188-8346-6203a42f3272"}}}]},"defaultTheme":"infotab_option_colorTheme","timesDownload":0,"timesAdded":0,"timesViewed":0}